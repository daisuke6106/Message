<!DOCTYPE html>
<html>
<head>
  <title>JMockit Coverage Report - MessageFile.java</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../../../../coverage.css'/>
  <script type='text/javascript' src='../../../../coverage.js'></script>
  <script type='text/javascript' src='../../../../prettify.js'></script>
</head>
<body onload='prettyPrint()'>
  <table cellpadding='0' cellspacing='1'>
    <caption>Message/src/main/java/jp/co/dk/message/MessageFile.java</caption>
    <tr>
      <td class='line'>1</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>package jp.co.dk.message;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td><pre class='imports prettyprint' onclick='showHideLines(this)'><div>import java.io.File;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.List;
import java.util.Locale;
import java.util.ResourceBundle;
</div><span>import ...</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>/**
 * 
 * MessageFileは、メッセージファイルを表すクラスです。&lt;p>
 * &lt;br>
 * ResourceBundleを保持しており、メッセージIDに紐づくメッセージ本文の取得などのメッセージプロパティファイルに対しての操作を行います。&lt;br>
 * 
 * @version 1.0
 * @author D.Kanno
 */</div><span>/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>19</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>class MessageFile {</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>21</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	ResourceBundle <span class='instance covered' title='Reads: 62 Writes: 17'>resouceBundle</span>;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * &lt;br>
	 * 指定のメッセージプロパティファイルにてメッセージファイルのインスタンスを生成します。
	 * @param file メッセージプロパティファイル
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>29</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	MessageFile(File file) {</pre></td>
    </tr>
    <tr>
      <td class='line'>30</td><td class='count'>5</td>
      <td><pre class='prettyprint covered' id='l30s0'>		this(file, Locale.getDefault());</pre></td>
    </tr>
    <tr>
      <td class='line'>31</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l31s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * &lt;br>
	 * 指定のメッセージプロパティファイル、ロケールにてメッセージファイルのインスタンスを生成します。
	 * @param file メッセージプロパティファイル
	 */    <tr>
      <td></td><td class='count'>4</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#00ff00' onclick='hidePath()'>Path coverage: 3/3</span>
        <span class='covered' onclick="showPath(this,'l39s0 l40s0 l40s1')">A: 1</span>
        <span class='covered' onclick="showPath(this,'l39s0 l40s0 l41s0 l41s1')">B: 1</span>
        <span class='covered' onclick="showPath(this,'l39s0 l40s0 l41s0 l42s0 l44s0')">C: 2</span>
      </td>
    </tr>
</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>39</td><td class='count'>6</td>
      <td><pre class='prettyprint covered' id='l39s0'>	MessageFile(File file, Locale locale) {</pre></td>
    </tr>
    <tr>
      <td class='line'>40</td><td class='count'>6</td>
      <td><pre class='prettyprint jmp'>		<span id='l40s0' title='Executions: 6' class='covered'>if (file == null)</span> <span id='l40s1' title='Executions: 1' class='covered'>throw new java.lang.IllegalArgumentException("File, which is the argument has not been set.");</span></pre></td>
    </tr>
    <tr>
      <td class='line'>41</td><td class='count'>5</td>
      <td><pre class='prettyprint jmp'>		<span id='l41s0' title='Executions: 5' class='covered'>if (locale == null)</span> <span id='l41s1' title='Executions: 1' class='covered'>throw new java.lang.IllegalArgumentException("Local is not set.");</span></pre></td>
    </tr>
    <tr>
      <td class='line'>42</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l42s0'>		String baseName = this.getBaseName(file.getPath());</pre></td>
    </tr>
    <tr>
      <td class='line'>43</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l43s0'>		this.resouceBundle = ResourceBundle.getBundle(baseName, locale);</pre></td>
    </tr>
    <tr>
      <td class='line'>44</td><td class='count'>2</td>
      <td><pre class='prettyprint covered' id='l44s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * &lt;br>
	 * 指定のメッセージプロパティファイルにてメッセージファイルのインスタンスを生成します。
	 * @param file メッセージプロパティファイル
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>52</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	MessageFile(String file) {</pre></td>
    </tr>
    <tr>
      <td class='line'>53</td><td class='count'>9</td>
      <td><pre class='prettyprint covered' id='l53s0'>		this(file, Locale.getDefault());</pre></td>
    </tr>
    <tr>
      <td class='line'>54</td><td class='count'>6</td>
      <td><pre class='prettyprint covered' id='l54s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * コンストラクタ&lt;p>
	 * &lt;br>
	 * 指定のメッセージプロパティファイル、ロケールにてメッセージファイルのインスタンスを生成します。
	 * @param file メッセージプロパティファイル
	 */    <tr>
      <td></td><td class='count'>18</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#00ff00' onclick='hidePath()'>Path coverage: 4/4</span>
        <span class='covered' onclick="showPath(this,'l62s0 l63s0 l63s2')">A: 1</span>
        <span class='covered' onclick="showPath(this,'l62s0 l63s0 l63s1 l63s2')">B: 1</span>
        <span class='covered' onclick="showPath(this,'l62s0 l63s0 l63s1 l64s0 l64s1')">C: 1</span>
        <span class='covered' onclick="showPath(this,'l62s0 l63s0 l63s1 l64s0 l65s0 l67s0')">D: 15</span>
      </td>
    </tr>
</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>62</td><td class='count'>19</td>
      <td><pre class='prettyprint covered' id='l62s0'>	MessageFile(String file, Locale locale) {</pre></td>
    </tr>
    <tr>
      <td class='line'>63</td><td class='count'>19</td>
      <td><pre class='prettyprint jmp'>		<span id='l63s0' title='Executions: 19' class='covered'>if (file == null</span> || <span id='l63s1' title='Executions: 18' class='covered'>file.equals("")) throw new java.lang.IllegalArgumentException("File, which is the argument has not been set.");</span></pre></td>
    </tr>
    <tr>
      <td class='line'>64</td><td class='count'>17</td>
      <td><pre class='prettyprint jmp'>		<span id='l64s0' title='Executions: 17' class='covered'>if (locale == null)</span> <span id='l64s1' title='Executions: 1' class='covered'>throw new java.lang.IllegalArgumentException("Local is not set.");</span></pre></td>
    </tr>
    <tr>
      <td class='line'>65</td><td class='count'>16</td>
      <td><pre class='prettyprint covered' id='l65s0'>		String baseName = this.getBaseName(file);</pre></td>
    </tr>
    <tr>
      <td class='line'>66</td><td class='count'>16</td>
      <td><pre class='prettyprint covered' id='l66s0'>		this.resouceBundle = ResourceBundle.getBundle(baseName, locale);</pre></td>
    </tr>
    <tr>
      <td class='line'>67</td><td class='count'>15</td>
      <td><pre class='prettyprint covered' id='l67s0'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * メッセージ本文を取得します&lt;p>
	 * 
	 * @param メッセージID
	 * @return メッセージ本文
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>75</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	String getMessage(String messageId) {</pre></td>
    </tr>
    <tr>
      <td class='line'>76</td><td class='count'>57</td>
      <td><pre class='prettyprint covered' id='l76s0'>		return this.resouceBundle.getString(messageId);</pre></td>
    </tr>
    <tr>
      <td class='line'>77</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * メッセージ本文を指定の埋込み文字列で置換したメッセージ本文を取得します。&lt;p>
	 * 
	 * @param str 埋め込み文字列
	 * @param メッセージ本文
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>85</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	String getMessage(String messageId, List&lt;String> replaceList) {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>36</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#00ff00' onclick='hidePath()'>Path coverage: 2/2</span>
        <span class='covered' onclick="showPath(this,'l86s0 l87s0 l87s1')">A: 1</span>
        <span class='covered' onclick="showPath(this,'l86s0 l87s0 l88s0 l88s1 l98s0')">B: 35</span>
      </td>
    </tr>
    <tr>
      <td class='line'>86</td><td class='count'>36</td>
      <td><pre class='prettyprint covered' id='l86s0'>		String message = this.getMessage(messageId);</pre></td>
    </tr>
    <tr>
      <td class='line'>87</td><td class='count'>36</td>
      <td><pre class='prettyprint jmp'>		<span id='l87s0' title='Executions: 36' class='covered'>if (replaceList == null)</span> <span id='l87s1' title='Executions: 1' class='covered'>return message;</span></pre></td>
    </tr>
    <tr>
      <td class='line'>88</td><td class='count'>98</td>
      <td><pre class='prettyprint covered' id='l88s0'>		for (int i = 0; i &lt; replaceList.size(); i++) {</pre></td>
    </tr>
    <tr>
      <td class='line'>89</td><td class='count'>63</td>
      <td><pre class='prettyprint covered' id='l89s0'>			String param = replaceList.get(i);</pre></td>
    </tr>
    <tr>
      <td class='line'>90</td><td class='count'>63</td>
      <td><pre class='prettyprint covered' id='l90s0'>			StringBuilder sb = new StringBuilder();</pre></td>
    </tr>
    <tr>
      <td class='line'>91</td><td class='count'>63</td>
      <td><pre class='prettyprint covered' id='l91s0'>			sb.append('{').append(i).append('}');</pre></td>
    </tr>
    <tr>
      <td class='line'>92</td><td class='count'>63</td>
      <td><pre class='prettyprint jmp'>			<span id='l92s0' title='Executions: 63' class='covered'>if (param != null)</span> <span id='l92s1' title='Executions: 62' class='covered'>{</span></pre></td>
    </tr>
    <tr>
      <td class='line'>93</td><td class='count'>62</td>
      <td><pre class='prettyprint covered' id='l93s0'>				message = message.replace(sb.toString(), param);</pre></td>
    </tr>
    <tr>
      <td class='line'>94</td><td class='count'>62</td>
      <td><pre class='prettyprint covered' id='l94s0'>			} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>95</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l95s0'>				message = message.replace(sb.toString(), "null");</pre></td>
    </tr>
    <tr>
      <td class='line'>96</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>97</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>98</td><td class='count'>35</td>
      <td><pre class='prettyprint covered' id='l98s0'>		return message;</pre></td>
    </tr>
    <tr>
      <td class='line'>99</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * メッセージプロパティファイルに定義されているメッセージIDの一覧を取得します。&lt;p>
	 * 
	 * @param メッセージID一覧
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>106</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	List&lt;String> getKeyList() {</pre></td>
    </tr>
    <tr>
      <td class='line'>107</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l107s0'>		List&lt;String> keyList = new ArrayList&lt;String>();</pre></td>
    </tr>
    <tr>
      <td class='line'>108</td><td class='count'>5</td>
      <td><pre class='prettyprint covered' id='l108s0'>		for (Enumeration&lt;String> enumerations = this.resouceBundle.getKeys(); enumerations</pre></td>
    </tr>
    <tr>
      <td class='line'>109</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l109s0'>				.hasMoreElements();) {</pre></td>
    </tr>
    <tr>
      <td class='line'>110</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l110s0'>			keyList.add(enumerations.nextElement());</pre></td>
    </tr>
    <tr>
      <td class='line'>111</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>112</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l112s0'>		return keyList;</pre></td>
    </tr>
    <tr>
      <td class='line'>113</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * メッセージプロパティファイルに定義されているメッセージ本文の一覧を取得します。&lt;p>
	 * 
	 * @param メッセージ本文一覧
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>120</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	List&lt;String> getValueList() {</pre></td>
    </tr>
    <tr>
      <td class='line'>121</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l121s0'>		List&lt;String> keyList = new ArrayList&lt;String>();</pre></td>
    </tr>
    <tr>
      <td class='line'>122</td><td class='count'>5</td>
      <td><pre class='prettyprint covered' id='l122s0'>		for (Enumeration&lt;String> enumerations = this.resouceBundle.getKeys(); enumerations</pre></td>
    </tr>
    <tr>
      <td class='line'>123</td><td class='count'>4</td>
      <td><pre class='prettyprint covered' id='l123s0'>				.hasMoreElements();) {</pre></td>
    </tr>
    <tr>
      <td class='line'>124</td><td class='count'>3</td>
      <td><pre class='prettyprint covered' id='l124s0'>			keyList.add(this.resouceBundle.getString(enumerations.nextElement()));</pre></td>
    </tr>
    <tr>
      <td class='line'>125</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>126</td><td class='count'>1</td>
      <td><pre class='prettyprint covered' id='l126s0'>		return keyList;</pre></td>
    </tr>
    <tr>
      <td class='line'>127</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>129</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	protected String getBaseName(String file) {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>27</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#00ff00' onclick='hidePath()'>Path coverage: 5/5</span>
        <span class='covered' onclick="showPath(this,'l130s0 l130s2')">A: 1</span>
        <span class='covered' onclick="showPath(this,'l130s0 l130s1 l130s2')">B: 2</span>
        <span class='covered' onclick="showPath(this,'l130s0 l130s1 l131s0 l131s1')">C: 1</span>
        <span class='covered' onclick="showPath(this,'l130s0 l130s1 l131s0 l132s0 l133s0 l134s0 l135s0')">D: 8</span>
        <span class='covered' onclick="showPath(this,'l130s0 l130s1 l131s0 l132s0 l133s0 l133s1 l134s0 l135s0')">E: 15</span>
      </td>
    </tr>
    <tr>
      <td class='line'>130</td><td class='count'>27</td>
      <td><pre class='prettyprint jmp'>		<span id='l130s0' title='Executions: 27' class='covered'>if (file == null</span> || <span id='l130s1' title='Executions: 26' class='covered'>file.equals("")) throw new java.lang.IllegalArgumentException("File, which is the argument has not been set.");</span></pre></td>
    </tr>
    <tr>
      <td class='line'>131</td><td class='count'>24</td>
      <td><pre class='prettyprint jmp'>		<span id='l131s0' title='Executions: 24' class='covered'>if (file.split("\\.").length > 2)</span> <span id='l131s1' title='Executions: 1' class='covered'>throw new java.lang.IllegalArgumentException("Dot has multiple definitions. Please specify a backslash or slash directory");</span></pre></td>
    </tr>
    <tr>
      <td class='line'>132</td><td class='count'>23</td>
      <td><pre class='prettyprint covered' id='l132s0'>		int index = file.lastIndexOf('.');</pre></td>
    </tr>
    <tr>
      <td class='line'>133</td><td class='count'>23</td>
      <td><pre class='prettyprint jmp'>		<span id='l133s0' title='Executions: 23' class='covered'>if (index != -1)</span> <span id='l133s1' title='Executions: 15' class='covered'>file = file.substring(0, index);</span></pre></td>
    </tr>
    <tr>
      <td class='line'>134</td><td class='count'>23</td>
      <td><pre class='prettyprint covered' id='l134s0'>		file = file.replace('/', '.').replace('\\', '.');</pre></td>
    </tr>
    <tr>
      <td class='line'>135</td><td class='count'>23</td>
      <td><pre class='prettyprint covered' id='l135s0'>		return file;</pre></td>
    </tr>
    <tr>
      <td class='line'>136</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr>
      <td class='line'>137</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>}</pre></td>
    </tr>
  </table>
</body>
</html>
